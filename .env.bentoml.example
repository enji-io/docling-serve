# BentoML Environment Variables Example for Docling Serve
# 
# IMPORTANT: This file is for documentation only. Do NOT commit actual values.
# Use BentoML Secrets for sensitive values in BentoCloud deployments.
# 
# For local testing, copy this file to .env.bentoml and fill in your values.
# Make sure .env.bentoml is in .gitignore (it should be).

# =============================================================================
# SENSITIVE VARIABLES - MUST USE BENTOML SECRETS
# =============================================================================

# API Authentication Key
# If set, all API requests must include X-Api-Key header with this value
# SECRET: Create in BentoCloud console or via: bentoml secret create docling-api-key --stage runtime
DOCLING_SERVE_API_KEY=

# Redis Connection URL (required if using RQ engine)
# Format: redis://[username:password@]host:port[/database]
# SECRET: Create in BentoCloud console or via: bentoml secret create docling-redis-url --stage runtime
DOCLING_SERVE_ENG_RQ_REDIS_URL=

# Kubeflow Pipelines (KFP) Authentication
# SECRET: Create in BentoCloud console or via: bentoml secret create docling-kfp-token --stage runtime
DOCLING_SERVE_ENG_KFP_TOKEN=
DOCLING_SERVE_ENG_KFP_CA_CERT_PATH=
DOCLING_SERVE_ENG_KFP_SELF_CALLBACK_TOKEN_PATH=
DOCLING_SERVE_ENG_KFP_SELF_CALLBACK_CA_CERT_PATH=

# =============================================================================
# GENERAL CONFIGURATION
# =============================================================================

# Enable the Gradio UI at /ui endpoint
DOCLING_SERVE_ENABLE_UI=false

# API host (usually not needed in BentoML, managed by BentoML)
DOCLING_SERVE_API_HOST=localhost

# Path to model artifacts directory
# If not set, models will be downloaded to default cache location
DOCLING_SERVE_ARTIFACTS_PATH=

# Path to static assets for documentation
DOCLING_SERVE_STATIC_PATH=

# Scratch directory for temporary files
# If not set, a temporary directory will be created
DOCLING_SERVE_SCRATCH_PATH=

# Load models at boot time (recommended: true for faster first request)
DOCLING_SERVE_LOAD_MODELS_AT_BOOT=true

# Number of DocumentConverter objects to keep in cache
DOCLING_SERVE_OPTIONS_CACHE_SIZE=2

# Enable remote services
DOCLING_SERVE_ENABLE_REMOTE_SERVICES=false

# Allow external plugins
DOCLING_SERVE_ALLOW_EXTERNAL_PLUGINS=false

# Show version information at /version endpoint
DOCLING_SERVE_SHOW_VERSION_INFO=true

# =============================================================================
# PERFORMANCE AND LIMITS
# =============================================================================

# Maximum document processing timeout (seconds)
DOCLING_SERVE_MAX_DOCUMENT_TIMEOUT=604800

# Maximum number of pages per document
DOCLING_SERVE_MAX_NUM_PAGES=

# Maximum file size (bytes)
DOCLING_SERVE_MAX_FILE_SIZE=

# Queue configuration
DOCLING_SERVE_QUEUE_MAX_SIZE=
DOCLING_SERVE_OCR_BATCH_SIZE=
DOCLING_SERVE_LAYOUT_BATCH_SIZE=
DOCLING_SERVE_TABLE_BATCH_SIZE=
DOCLING_SERVE_BATCH_POLLING_INTERVAL_SECONDS=

# Synchronous API polling configuration
DOCLING_SERVE_SYNC_POLL_INTERVAL=2
DOCLING_SERVE_MAX_SYNC_WAIT=120

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# CORS origins (comma-separated list)
DOCLING_SERVE_CORS_ORIGINS=*

# CORS methods (comma-separated list)
DOCLING_SERVE_CORS_METHODS=*

# CORS headers (comma-separated list)
DOCLING_SERVE_CORS_HEADERS=*

# =============================================================================
# COMPUTE ENGINE CONFIGURATION
# =============================================================================

# Engine type: local, rq, or kfp
DOCLING_SERVE_ENG_KIND=local

# Local engine configuration
DOCLING_SERVE_ENG_LOC_NUM_WORKERS=2
DOCLING_SERVE_ENG_LOC_SHARE_MODELS=false

# RQ engine configuration (requires DOCLING_SERVE_ENG_RQ_REDIS_URL)
DOCLING_SERVE_ENG_RQ_RESULTS_PREFIX=docling:results
DOCLING_SERVE_ENG_RQ_SUB_CHANNEL=docling:updates
DOCLING_SERVE_ENG_RQ_RESULTS_TTL=14400

# KFP engine configuration (requires DOCLING_SERVE_ENG_KFP_ENDPOINT)
DOCLING_SERVE_ENG_KFP_ENDPOINT=
DOCLING_SERVE_ENG_KFP_EXPERIMENTAL=false
DOCLING_SERVE_ENG_KFP_SELF_CALLBACK_ENDPOINT=

# =============================================================================
# OPENTELEMETRY / OBSERVABILITY
# =============================================================================

DOCLING_SERVE_OTEL_ENABLE_METRICS=true
DOCLING_SERVE_OTEL_ENABLE_TRACES=false
DOCLING_SERVE_OTEL_ENABLE_PROMETHEUS=true
DOCLING_SERVE_OTEL_ENABLE_OTLP_METRICS=false
DOCLING_SERVE_OTEL_SERVICE_NAME=docling-serve

# =============================================================================
# UVICORN SETTINGS (Note: Most are managed by BentoML)
# =============================================================================

# These settings are typically managed by BentoML, but can be set if needed
# UVICORN_HOST is managed by BentoML
# UVICORN_PORT is managed by BentoML
# UVICORN_RELOAD is not applicable in BentoML (managed by BentoML)
# UVICORN_WORKERS is not applicable in BentoML (managed by BentoML)

UVICORN_ROOT_PATH=
UVICORN_PROXY_HEADERS=true
UVICORN_TIMEOUT_KEEP_ALIVE=60

# SSL configuration (if needed)
UVICORN_SSL_CERTFILE=
UVICORN_SSL_KEYFILE=
UVICORN_SSL_KEYFILE_PASSWORD=

# =============================================================================
# DOCLING CORE SETTINGS
# =============================================================================

# Number of threads for CPU execution
DOCLING_NUM_THREADS=4

# Device for model execution: cpu, cuda, mps, or cuda:0, cuda:1, etc.
DOCLING_DEVICE=

# Performance batch sizes
DOCLING_PERF_PAGE_BATCH_SIZE=4
DOCLING_PERF_ELEMENTS_BATCH_SIZE=8

# Debug profiling
DOCLING_DEBUG_PROFILE_PIPELINE_TIMINGS=false

# =============================================================================
# SYSTEM SETTINGS
# =============================================================================

# Tesseract data path (set in Docker image)
TESSDATA_PREFIX=/usr/share/tesseract/tessdata/

# OpenMP threads
OMP_NUM_THREADS=4

# Locale settings
LANG=en_US.UTF-8
LC_ALL=en_US.UTF-8
PYTHONIOENCODING=utf-8
